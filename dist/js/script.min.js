$((function(){const e=document.querySelector(".investment-currency"),t=document.querySelectorAll(".radio-box"),n=document.querySelector(".investment-value"),r=document.querySelector(".profit-percent-value"),o=document.getElementById("you-invested"),c=document.getElementById("you-get"),i=document.querySelector(".interest-rate__value-percent"),a=document.querySelector(".profit-value");let l={};const u=[0,.25,.5,.75,1,1.25,1.5,1.75,2,2.25,2.75],s=[31,28,31,30,31,30,31,31,30,31,30,31],m=document.querySelector("#investment-start"),d=document.querySelector("#investment-end");let v,p,x,g,f=new Date("2021-01-01"),y=f.getFullYear(),C=f.getMonth()+1,F=f.getDate();m.value=`${y}-0${C}-0${F}`;var h=$("#investment-term");h.ionRangeSlider({grid:!0,grid_num:11,grid_snap:!0,min:1,max:11,step:1,onChange:function(e){var t=h.data("ionRangeSlider").result.from;currentRate=u[t-1],l.term=t,l.percent=u[t-1],i.textContent=l.percent+"%",M(),D(),_(),l.investment=R.result.from,investVal=`${l.investment.toFixed(3).replace(".",",")} ${l.currency}`,o.textContent=investVal,n.textContent=investVal,l.get=l.investment*V/100+l.investment,c.textContent=`${l.get.toFixed(3).replace(".",",")} ${l.currency}`,l.profit=l.get-l.investment,r.textContent=V+" %",a.textContent=`${l.profit.toFixed(3).replace(".",",")} ${l.currency}`,console.log(l)}});var S=h.data("ionRangeSlider").result.from;let V;function D(){M();let e=[];for(let t=C-1;t<x-1;t++)e.push(s[t]);V=e.map(e=>e*currentRate).reduce((e,t)=>e+t),r.textContent=V+" %"}l.term=S,l.percent=u[S-1],i.textContent=l.percent+"%",currentRate=u[S-1],D();for(let n=0;n<t.length;n++)t[n].checked&&(l.currency=t[n].value,e.textContent=""+l.currency),t[n].addEventListener("input",()=>{t[n].checked&&(l.currency=t[n].value,console.log(l),_(),e.textContent=""+l.currency)}),t[n].addEventListener("change",()=>{t[n].checked&&(l.currency=t[n].value,console.log(l),_(),e.textContent=""+l.currency)});var E=$("#investment-amount"),q=$(".investment-sum-input");E.ionRangeSlider({min:0,max:40,from:10,onStart:function(e){q.prop("value",""+e.from.toFixed(3).replace(".",","));$(this).data("from");l.investment=e.from,investVal=`${l.investment.toFixed(3).replace(".",",")} ${l.currency}`,o.textContent=investVal,n.textContent=investVal,l.get=l.investment*V/100+l.investment,c.textContent=`${l.get.toFixed(3).replace(".",",")} ${l.currency}`,l.profit=l.get-l.investment,r.textContent=V+" %",a.textContent=`${l.profit.toFixed(3).replace(".",",")} ${l.currency}`,console.log(l),D()},onChange:function(e){q.prop("value",""+e.from.toFixed(3).replace(".",","));$(this).data("from");l.investment=e.from,investVal=`${l.investment.toFixed(3).replace(".",",")} ${l.currency}`,o.textContent=investVal,n.textContent=investVal,l.get=l.investment*V/100+l.investment,c.textContent=`${l.get.toFixed(3).replace(".",",")} ${l.currency}`,l.profit=l.get-l.investment,r.textContent=V+" %",a.textContent=`${l.profit.toFixed(3).replace(".",",")} ${l.currency}`,console.log(l),D()}});var R=E.data("ionRangeSlider");function M(){let e,t=m.value,n=[];for(let e=0;e<4;e++)n.push(t[e]);e=n.join("");let r,o=[];for(let e=5;e<7;e++)o.push(t[e]);0==o[0]&&o.splice(0,1),r=o.join("");let c,i=[];for(let e=0;e<t.length;e++)i.push(t[e]);i.splice(0,8),0==i[0]&&i.splice(0,1),c=i.join(""),g=c,g=g<10?"0"+g:g,x=+r+l.term,x=x<10?"0"+x:x,p=e,v=new Date(`${p}-${x}-${g}`),d.value=`${p}-${x}-${g}`}function _(){o.textContent=`${l.investment.toFixed(3).replace(".",",")} ${l.currency}`,n.textContent=`${l.investment.toFixed(3).replace(".",",")} ${l.currency}`,a.textContent=`${l.profit.toFixed(3).replace(".",",")} ${l.currency}`,c.textContent=`${l.get.toFixed(3).replace(".",",")} ${l.currency}`}l.investment=R.result.from,investVal=`${l.investment.toFixed(3).replace(".",",")} ${l.currency}`,o.textContent=investVal,n.textContent=investVal,l.get=l.investment*V/100+l.investment,c.textContent=`${l.get.toFixed(3).replace(".",",")} ${l.currency}`,l.profit=l.get-l.investment,r.textContent=V+" %",a.textContent=`${l.profit.toFixed(3).replace(".",",")} ${l.currency}`,M(),m.addEventListener("change",()=>{console.log(m.value),M()}),function(e,t){const n=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"];let r=e.getMonth(),o=t.getMonth();investmentStartFormattedMonth=n[r],investmentEndFormattedMonth=n[o],formattedStartDate=`${e.getDate()} ${investmentStartFormattedMonth} ${e.getFullYear()}`,formattedEndDate=`${t.getDate()} ${investmentEndFormattedMonth} ${t.getFullYear()}`,l.startDate=formattedStartDate,l.endDate=formattedEndDate}(f,v),q.on("input",(function(){var e=$(this).prop("value");e<0?e=0:e>40&&(e=40),instance.update({from:e})})),_()}));